<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IWMI Water Accounting+ Dashboard • WADashboard</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="IWMI Water Accounting+ Dashboard">
<meta property="og:description" content="This package includes all dependencies to run WA+ Dashboard 
  application either locally inside RStudio or containerized.">
<meta property="og:image" content="https://github.mbacou.io/WADashboard/inst/app/www/fig/iwmi_logo_w.svg">
<meta property="og:image:alt" content="Water Accounting+">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@iwmi">
<meta name="twitter:site" content="@iwmi">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">WADashboard</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.8</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="WA_data_etl.html">Get started</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="news/index.html">Changelog</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://github.com/mbacou/WADashboard" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="dashboard-for-wa-water-accounts">Dashboard for WA+ Water Accounts<a class="anchor" aria-label="anchor" href="#dashboard-for-wa-water-accounts"></a>
</h1></div>
<p>Development package for a <a href="https://shiny.rstudio.com/" class="external-link">Shiny</a> data visualization tool that collects results from <a href="https://www.wateraccounting.org/" class="external-link">Water Accounting+</a> (WA+) hydrological models.</p>
<p>Water accounting integrates hydrological processes with land use, managed water flows and the services that result from water consumption in river basins. Its objective is to achieve equitable and transparent water governance for all users and a more sustainable water balance.</p>
<p>WA+ is a multi-institutional effort from a consortium of international research centers (<a href="https://www.iwmi.cgiar.org/" class="external-link">IWMI</a>, <a href="https://www.un-ihe.org/" class="external-link">UNESCO-IHE</a>, <a href="https://www.fao.org/land-water/water/en/" class="external-link">FAO</a>, and <a href="https://en.unesco.org/wwap" class="external-link">WWAP</a>). These institutions are neither politically or geographically connected to any river basin.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install this package from the development version on GitHub:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://devtools.r-lib.org/" class="external-link">"devtools"</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/remote-reexports.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"mbacou/WADashboard"</span><span class="op">)</span></code></pre></div>
<p>The app can be previewed in the RStudio IDE with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/source.html" class="external-link">source</a></span><span class="op">(</span><span class="st">"./app.R"</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="documentation">Documentation<a class="anchor" aria-label="anchor" href="#documentation"></a>
</h2>
<p>In addition to the usual R package documentation, we also have extensive docs at: <a href="https://mbacou.github.io/WADashboard/" class="external-link">https://mbacou.github.io/WADashboard/</a>.</p>
<p>To configure, extend, and rebuild this application:</p>
<ol style="list-style-type: decimal">
<li><p>Edit environment variable <code>WA_DATA</code> in file <code>./.Renviron</code> pointing to the root location of your WA+ model output (collection of CSV and NetCDF files). Any local or cloud-based storage type may be implemented (incl. Amazon S3).</p></li>
<li>
<p>Edit 2 configuration files:</p>
<ul>
<li><a href="https://github.com/mbacou/WADashboard/blob/main/data-raw/json/ISO3.json" class="external-link">List of river basins</a></li>
<li><a href="https://github.com/mbacou/WADashboard/blob/main/data-raw/json/LAYERS.json" class="external-link">Catalog of contextual geospatial layers</a></li>
</ul>
</li>
<li><p>Rebuild the R package and reinstall by executing <code>./build.sh</code>.</p></li>
</ol>
</div>
<div class="section level2">
<h2 id="application-deployment">Application Deployment<a class="anchor" aria-label="anchor" href="#application-deployment"></a>
</h2>
<p>A Docker <a href="https://github.com/mbacou/WADashboard/Dockerfile" class="external-link">image file</a> is provided for deployment to AWS ECS (Fargate). This image includes Shiny Server Community Edition and (for development only) RStudio Server Preview.</p>
<p>You can build and test this image locally with:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># replace {pwd} with a chosen password for the default rstudio user</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> build <span class="at">-t</span> wadashboard .</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">--name</span> wadashboard PASSWORD={pwd} <span class="at">-p</span> 80:3838 <span class="at">-p</span> 8787:8787 wadashboard</span></code></pre></div>
<p>Once you’ve established that this container runs locally, it can be deployed to AWS ECS (see <a href="https://github.com/mbacou/WADashboard/deploy.sh" class="external-link">./deploy.sh</a> for an automated deployment script):</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Authenticate your local Docker client</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="ex">aws</span> ecr get-login-password <span class="at">--region</span> {region} <span class="kw">|</span> <span class="ex">docker</span> login <span class="at">--username</span> AWS <span class="at">--password-stdin</span> {aws_account_id}.dkr.ecr.{region}.amazonaws.com</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Tag your image with your Amazon ECR registry</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> tag wadashboard {aws_account_id}.dkr.ecr.{region}.amazonaws.com/wadashboard</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Push the image to your AWS ECR registry</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> push {aws_account_id}.dkr.ecr.{region}.amazonaws.com/wadashboard</span></code></pre></div>
<p>The dashboard application is served on the host at <code>http://localhost/WADashboard/</code>. RStudio IDE is reachable at <code>http://localhost:8787/</code> (replace <code>localhost</code> with your container’s public IP or domain name).</p>
</div>
<div class="section level2">
<h2 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h2>
<p>This package is licensed under the terms of the <a href="https://www.gnu.org/licenses/gpl-3.0.html" class="external-link">GNU General Public License</a> version 3 or later.</p>
<p>Copyright 2021-2022 International Water Management Institute (IWMI).</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/mbacou/WADashboard/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/mbacou/WADashboard/issues/" class="external-link">Report a bug</a></li>
<li><a href="http://wateraccounting.org/" class="external-link">Water Accounting+</a></li>
<li><a href="http://iwmi.cgiar.org/" class="external-link">IWMI</a></li>
<li><a href="https://www.fao.org/in-action/remote-sensing-for-water-productivity/en/" class="external-link">FAO WaPOR</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing WADashboard</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://linkedin.com/in/mbacou/" class="external-link">Melanie Bacou</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-1810-6818" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>



  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://linkedin.com/in/mbacou/" class="external-link">Melanie Bacou</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
